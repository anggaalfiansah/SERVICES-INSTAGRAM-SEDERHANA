"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.writeSubscribePacket = void 0;
function writeSubscribePacket(stream, options) {
    var _a;
    stream.writeWord(options.identifier);
    if (options.subscriptions.length === 0)
        throw new Error('The payload of a SUBSCRIBE packet MUST contain at least one Topic Filter / QoS pair');
    for (const sub of options.subscriptions) {
        if (sub.qos && sub.qos > 2)
            throw new Error('invalid QoS');
        stream.writeString(sub.topic).writeByte((_a = sub.qos) !== null && _a !== void 0 ? _a : 0);
    }
    return { flags: 2, identifier: options.identifier };
}
exports.writeSubscribePacket = writeSubscribePacket;
//# sourceMappingURL=subscribe.request.packet.js.map